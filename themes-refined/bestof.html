<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>keeb.dev — bestof</title>
<style>
  @keyframes wave-animation {
    0%, 30%, 100% { color: #c9cacc; }
    5% {
      background: linear-gradient(90deg, #d480aa -20%, #d480aa 0%, #c9cacc 15%, #c9cacc 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    10% {
      background: linear-gradient(90deg, #c9cacc 0%, #d480aa 10%, #d480aa 25%, #c9cacc 40%, #c9cacc 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    15% {
      background: linear-gradient(90deg, #c9cacc 0%, #c9cacc 20%, #d480aa 35%, #d480aa 50%, #c9cacc 65%, #c9cacc 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    20% {
      background: linear-gradient(90deg, #c9cacc 0%, #c9cacc 45%, #d480aa 60%, #d480aa 75%, #c9cacc 90%, #c9cacc 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    25% {
      background: linear-gradient(90deg, #c9cacc 0%, #c9cacc 70%, #d480aa 85%, #d480aa 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
  }

  @keyframes blink {
    0%, 49% { opacity: 1; }
    50%, 100% { opacity: 0; }
  }

  *, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    font-size: 17px;
  }

  body {
    background: #1d1f21;
    color: #c9cacc;
    font-family: 'Menlo', 'Meslo LG', 'Courier New', monospace;
    line-height: 1.8;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  /* Scanlines */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.03) 0px,
      rgba(0, 0, 0, 0.03) 1px,
      transparent 1px,
      transparent 3px
    );
    pointer-events: none;
    z-index: 9999;
  }

  ::selection {
    background: rgba(212, 128, 170, 0.25);
    color: #fff;
  }

  ::-moz-selection {
    background: rgba(212, 128, 170, 0.25);
    color: #fff;
  }

  /* === ASCII HEADER === */
  .ascii-header {
    padding: 3rem 1rem 2rem;
    overflow-x: auto;
  }

  .ascii-header pre {
    width: fit-content;
    margin: 0 auto;
    font-family: 'Menlo', 'Meslo LG', 'Courier New', monospace;
    font-size: clamp(0.5rem, 1.5vw, 1.1rem);
    line-height: 1.3;
    color: #d5a1aa;
    animation: wave-animation 8s ease-in-out infinite;
    white-space: pre;
  }

  .ascii-cursor {
    color: #d480aa;
    animation: blink 1s step-end infinite;
  }

  /* === AVATAR: top-left corner === */
  .avatar-link {
    position: fixed;
    top: 1rem;
    left: 1rem;
    z-index: 100;
  }

  .avatar-link img {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 2px solid #d480aa33;
    transition: border-color 0.3s ease;
    display: block;
  }

  .avatar-link img:hover {
    border-color: #d480aa;
  }

  /* === LAYOUT: sidebar flush left, content centered === */
  .layout {
    display: flex;
    width: 100%;
    gap: 0;
  }

  /* === SIDEBAR: flush left, collapsible === */
  .sidebar {
    flex: 0 0 30%;
    max-width: 30%;
    position: relative;
    overflow: hidden;
    transition: flex-basis 0.3s ease, max-width 0.3s ease, padding 0.3s ease;
  }

  .layout.collapsed .sidebar {
    flex-basis: 0;
    max-width: 0;
  }

  .layout.collapsed .sidebar-inner {
    opacity: 0;
    transition: opacity 0.15s ease;
  }

  .sidebar-inner {
    opacity: 1;
    transition: opacity 0.2s 0.1s ease;
  }

  /* === DIVIDER: clickable collapse handle === */
  .divider {
    flex: 0 0 1px;
    background: #908d8d;
    cursor: pointer;
    position: relative;
    transition: background 0.2s ease;
  }

  .divider:hover {
    background: #d480aa;
  }

  /* chevrons that appear on hover */
  .divider::before {
    content: '‹‹';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #d480aa;
    font-size: 0.7rem;
    letter-spacing: -3px;
    background: #1d1f21;
    padding: 4px 2px;
    border-radius: 3px;
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
    white-space: nowrap;
  }

  .divider:hover::before {
    opacity: 1;
  }

  /* wider invisible hit area */
  .divider::after {
    content: '';
    position: absolute;
    top: 0;
    left: -4px;
    width: 9px;
    height: 100%;
    background: transparent;
    cursor: pointer;
  }

  /* === EXPAND TAB: shows when collapsed === */
  .expand-tab {
    position: fixed;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 48px;
    background: #282a2e;
    border: 1px solid #908d8d;
    border-left: none;
    border-radius: 0 4px 4px 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #908d8d;
    font-size: 0.7rem;
    z-index: 100;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s 0s ease, color 0.2s ease, border-color 0.2s ease;
  }

  .expand-tab:hover {
    color: #d480aa;
    border-color: #d480aa;
  }

  .layout.collapsed ~ .expand-tab {
    opacity: 1;
    pointer-events: auto;
    transition: opacity 0.2s 0.2s ease, color 0.2s ease, border-color 0.2s ease;
  }

  .sidebar-inner {
    position: sticky;
    top: 0;
    max-height: 100vh;
    overflow-y: auto;
    padding: 1rem 1.5rem 1rem 1.5rem;
    /* column-reverse: tree flows upward when it overflows,
       keeping newest entries visible at the bottom */
    display: flex;
    flex-direction: column-reverse;
  }

  .sidebar-inner::-webkit-scrollbar { width: 3px; }
  .sidebar-inner::-webkit-scrollbar-track { background: transparent; }
  .sidebar-inner::-webkit-scrollbar-thumb { background: #908d8d; border-radius: 3px; }
  .sidebar-inner { scrollbar-width: thin; scrollbar-color: #908d8d transparent; }

  /* === SIDEBAR NAV === */
  .sidebar-nav {
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #908d8d44;
  }

  .sidebar-nav a {
    color: #d480aa;
    text-decoration: none;
    font-size: 0.85rem;
    transition: color 0.2s ease;
  }

  .sidebar-nav a:hover {
    color: #fff;
  }

  .sidebar-nav .sep {
    color: #908d8d;
    margin: 0 0.6rem;
    font-size: 0.85rem;
  }

  /* === CONTENT: fills remaining space === */
  .content {
    flex: 1;
    min-width: 0;
    padding: 1rem 2rem 3rem;
  }

  /* === CSS GRID FILE TREE === */
  .tree {
    font-family: 'Menlo', 'Meslo LG', 'Courier New', monospace;
    font-size: 0.8rem;
    line-height: 1.6;
    color: #908d8d;
  }

  .tree-dir-line {
    white-space: nowrap;
  }

  .tree-dir {
    color: #d5a1aa;
    font-weight: bold;
  }

  .tree-entry {
    display: grid;
    grid-template-columns: auto 10ch 1fr auto;
    gap: 0 0.5ch;
    align-items: baseline;
    white-space: nowrap;
  }

  .tree-branch {
    color: #908d8d;
    white-space: pre;
  }

  .tree-date {
    color: #908d8d;
    font-size: 0.72rem;
  }

  .tree-file-link {
    color: #c9cacc;
    text-decoration: none;
    transition: color 0.2s ease;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .tree-file-link:hover {
    color: #d480aa;
  }

  .tree-tags {
    color: #908d8d;
    font-size: 0.68rem;
    margin-left: 1ch;
  }

  .tree-entry.active .tree-file-link {
    color: #d480aa;
  }

  .tree-entry.active .tree-tags {
    color: #d480aa;
  }

  /* === ARTICLE === */
  .article h2 {
    color: #fff;
    font-size: 1.5rem;
    margin-bottom: 0.25rem;
    font-weight: bold;
  }

  .article .meta {
    color: #908d8d;
    font-size: 0.85rem;
    margin-bottom: 1.5rem;
  }

  .article p {
    margin-bottom: 1.2rem;
  }

  .article a {
    color: #d480aa;
    text-decoration: none;
  }

  .article a:hover {
    text-decoration: underline;
  }

  .article code {
    color: #d480aa;
    background: rgba(212, 128, 170, 0.08);
    padding: 0.15em 0.35em;
    border-radius: 3px;
    font-size: 0.9em;
    font-family: 'Menlo', 'Meslo LG', 'Courier New', monospace;
  }

  .article strong {
    color: #fff;
    font-weight: bold;
  }

  .article blockquote {
    color: #ccffb6;
    border-left: 3px solid #ccffb6;
    padding-left: 1rem;
    margin: 1.2rem 0;
    font-style: normal;
  }

  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .layout {
      flex-direction: column;
    }

    .sidebar,
    .content {
      flex: 0 0 100%;
      max-width: 100%;
    }

    .sidebar-inner {
      position: static;
      max-height: none;
      flex-direction: column;
      padding: 1rem;
    }

    .content {
      border-left: none;
      border-top: 1px solid #908d8d;
      padding: 1.5rem 1rem 3rem;
    }

    .ascii-header pre {
      font-size: clamp(0.35rem, 2.5vw, 0.8rem);
    }
  }
</style>
</head>
<body>

<!-- ASCII Header -->
<div class="ascii-header">
<pre>      ..                                  ..              ..                     _
&lt; .z@8"`                            . uW8"              dF                      u
 !@88E                              `t888              '88bu.                  88Nu.   u.
 '888E   u         .u         .u     8888   .          '*88888bu        .u    '88888.o888c
  888E u@8NL    ud8888.    ud8888.   9888.z88N           ^"*8888N    ud8888.   ^8888  8888
  888E`"88*"  :888'8888. :888'8888.  9888  888E         beWE "888L :888'8888.   8888  8888
  888E .dN.   d888 '88%" d888 '88%"  9888  888E         888E  888E d888 '88%"   8888  8888
  888E~8888   8888.+"    8888.+"     9888  888E         888E  888E 8888.+"      8888  8888
  888E '888&amp;  8888L      8888L       9888  888E    .    888E  888F 8888L       .8888b.888P
  888E  9888. '8888c. .+ '8888c. .+ .8888  888"  .@8c  .888N..888  '8888c. .+   ^Y8888*""
'"888*" 4888"  "88888%    "88888%    `%888*%"   '%888"  `"888*""    "88888%       `Y"
   ""    ""      "YP'       "YP'        "`        ^*       ""         "YP'
<span class="ascii-cursor">&#9608;</span></pre>
</div>

<!-- Avatar: fixed top-left, links home -->
<a href="https://keeb.dev" class="avatar-link"><img src="avatar.webp" alt="keeb avatar"></a>

<!-- Layout: sidebar flush left, content centered -->
<div class="layout">

  <!-- Sidebar: nav + tree, flush left -->
  <div class="sidebar">
    <div class="sidebar-inner">
      <div class="sidebar-content">

        <nav class="sidebar-nav">
          <a href="#">Home</a><span class="sep">|</span><a href="#">About</a><span class="sep">|</span><a href="#">Writing</a>
        </nav>

        <div class="tree">
          <div class="tree-dir-line"><span class="tree-dir">keeb.dev/</span></div>
          <div class="tree-dir-line"><span class="tree-branch">├── </span><span class="tree-dir">writing/</span></div>

          <div class="tree-dir-line"><span class="tree-branch">│   ├── </span><span class="tree-dir">2022/</span></div>

          <div class="tree-entry">
            <span class="tree-branch">│   │   ├── </span>
            <span class="tree-date">2022-03-14</span>
            <a href="#" class="tree-file-link">the-lore.md</a>
            <span class="tree-tags">[meta]</span>
          </div>

          <div class="tree-entry active">
            <span class="tree-branch">│   │   ├── </span>
            <span class="tree-date">2022-05-28</span>
            <a href="#" class="tree-file-link">hexo-and-vscode.md</a>
            <span class="tree-tags">[meta, hexo, dev]</span>
          </div>

          <div class="tree-entry">
            <span class="tree-branch">│   │   └── </span>
            <span class="tree-date">2022-08-10</span>
            <a href="#" class="tree-file-link">i-made-a-keylogger.md</a>
            <span class="tree-tags">[security, c]</span>
          </div>

          <div class="tree-dir-line"><span class="tree-branch">│   ├── </span><span class="tree-dir">2023/</span></div>

          <div class="tree-entry">
            <span class="tree-branch">│   │   └── </span>
            <span class="tree-date">2023-11-02</span>
            <a href="#" class="tree-file-link">virtualization-from-scratch.md</a>
            <span class="tree-tags">[linux, kvm]</span>
          </div>

          <div class="tree-dir-line"><span class="tree-branch">│   ├── </span><span class="tree-dir">2025/</span></div>

          <div class="tree-entry">
            <span class="tree-branch">│   │   ├── </span>
            <span class="tree-date">2025-01-15</span>
            <a href="#" class="tree-file-link">terraform-with-glitter.md</a>
            <span class="tree-tags">[iac, terraform]</span>
          </div>

          <div class="tree-entry">
            <span class="tree-branch">│   │   ├── </span>
            <span class="tree-date">2025-03-22</span>
            <a href="#" class="tree-file-link">ai-is-great-at-parsing.md</a>
            <span class="tree-tags">[ai, dev]</span>
          </div>

          <div class="tree-entry">
            <span class="tree-branch">│   │   └── </span>
            <span class="tree-date">2025-06-01</span>
            <a href="#" class="tree-file-link">claude-sonnet-4.5-system-initiative.md</a>
            <span class="tree-tags">[ai, llm]</span>
          </div>

          <div class="tree-dir-line"><span class="tree-branch">│   └── </span><span class="tree-dir">2026/</span></div>

          <div class="tree-entry">
            <span class="tree-branch">│       ├── </span>
            <span class="tree-date">2026-01-08</span>
            <a href="#" class="tree-file-link">ai-native-infrastructure.md</a>
            <span class="tree-tags">[ai, infra]</span>
          </div>

          <div class="tree-entry">
            <span class="tree-branch">│       └── </span>
            <span class="tree-date">2026-01-29</span>
            <a href="#" class="tree-file-link">mcp-is-dead.md</a>
            <span class="tree-tags">[ai, protocols]</span>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Divider: click to collapse sidebar -->
  <div class="divider" id="divider"></div>

  <!-- Content -->
  <div class="content">
    <article class="article">
      <h2>Hexo &amp; VSCode: Asset Management That Doesn't Make You Cry</h2>
      <div class="meta">2022-05-28 &mdash; keeb</div>

      <p>
        When I first set up this site with <a href="https://hexo.io">Hexo</a>, I had a naive assumption that dropping images into a folder and referencing them in Markdown would just work. Static site generators are supposed to be simple, right? You write Markdown, you run a build command, and HTML appears on the other end. In practice, Hexo's asset pipeline has a few sharp edges that will cut you if you're not paying attention. The core issue is that Hexo supports two distinct modes for handling post assets: a global <code>source/images</code> directory, and per-post asset folders that live alongside each <code>.md</code> file. Choosing the wrong one early on creates a mess that compounds with every new post you write.
      </p>

      <p>
        The per-post asset folder approach is the one I settled on. You enable it in <code>_config.yml</code> with <code>post_asset_folder: true</code>, and from that point forward, every time you run <code>hexo new</code>, Hexo creates both a <code>.md</code> file and a matching directory with the same slug. Screenshots, diagrams, and any other media go into that directory. The problem is that <strong>standard Markdown image syntax doesn't resolve these paths correctly</strong> during the build. You end up with broken images in the generated HTML because Hexo's renderer doesn't know to look in the asset folder unless you use its proprietary <code>{% asset_img %}</code> tag. That tag works, but it means your Markdown is no longer portable -- open the same file in a GitHub preview or any other renderer and you get nothing.
      </p>

      <blockquote>
        <p>The best tooling is the kind that stays out of your way. If your static site generator forces you to choose between portable Markdown and working images, something has gone wrong in the design.</p>
      </blockquote>

      <p>
        The <a href="https://github.com/liolok/hexo-asset-link">hexo-asset-link</a> plugin solves this cleanly. It patches the Markdown renderer so that standard relative image paths like <code>![screenshot](hexo-and-vscode/terminal.png)</code> resolve correctly against the post's asset folder. No proprietary tags, no broken previews. Your Markdown files remain valid everywhere -- in VSCode's built-in preview, on GitHub, and in the final Hexo build. I installed it with a single <code>npm install hexo-asset-link --save</code> and didn't have to touch another configuration file. This is the kind of plugin that should arguably be part of Hexo's core, but the ecosystem has always favored small composable packages over batteries-included defaults.
      </p>

      <p>
        On the VSCode side, I've leaned heavily into a few extensions that make the writing workflow almost frictionless. <strong>Markdown All in One</strong> handles keyboard shortcuts, table formatting, and auto-completion of links. <a href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one">The extension</a> also gives you a live table-of-contents generator that updates as you type, which is useful for longer technical posts. I pair it with <strong>Paste Image</strong>, which intercepts clipboard paste events and automatically saves the image into the current post's asset folder with a timestamped filename. The combination means I can take a screenshot, hit <code>Ctrl+Alt+V</code> in VSCode, and the image is saved, named, and linked in one keystroke. No more alt-tabbing to a file manager, no more manually writing out paths.
      </p>

      <p>
        The last piece of the puzzle is the Docker-based preview. I run <code>docker-compose --profile serve up</code> which starts Hexo's development server on port 4000 with live reload. The container mounts the source directory as a volume, so every save in VSCode triggers a rebuild. The entire feedback loop -- write, paste an image, save, see the result in the browser -- takes about two seconds. It's not instant, but it's fast enough that the writing stays in flow. For a statically generated site running inside a container, I'll take it. The whole setup is version-controlled, reproducible, and doesn't require installing Node.js or any Hexo dependencies on the host machine. That was the goal from the start: a writing environment that treats the blog like infrastructure, not a craft project.
      </p>
    </article>
  </div>

</div>

<!-- Expand tab: appears when sidebar is collapsed -->
<div class="expand-tab" id="expand-tab">&#9654;</div>

<script>
  const layout = document.querySelector('.layout');
  const divider = document.getElementById('divider');
  const expandTab = document.getElementById('expand-tab');

  divider.addEventListener('click', () => {
    layout.classList.add('collapsed');
  });

  expandTab.addEventListener('click', () => {
    layout.classList.remove('collapsed');
  });
</script>

</body>
</html>
